schema:
  schema_id: zrlong
  name: è‡ªç„¶é¾™
  version: "20240225"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šæ™¡æ—¶ä¹‹å…‰
    - modded by å°å¹½å¹½
  description: |
    å¸¦è°ƒåŒæ‹¼ï¼Œè‡ªç„¶è¾…ã€‚
  dependencies:
    - tigress
    - zrlf
    - stroke
    - moran_reverse
switches:
  - name: ascii_mode
    states: [ä¸­æ–‡, è¥¿æ–‡]
  - name: full_shape
    states: [åŠè§’, å…¨è§’]
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
  - name: emoji
    states: [ğŸˆš, ğŸˆ¶]

engine:
  processors:
    - lua_processor@*case_processor
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@zkci
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - reverse_lookup_translator@reverse_tiger
    - reverse_lookup_translator@reverse_stroke
    - reverse_lookup_translator@reverse_zrlf
    - table_translator
    - table_translator@custom_phrase # è‡ªå®šç¾©çŸ­èª
    - table_translator@fixed
    - table_translator@zkci
    # - history_translator@repeat
    - lua_translator@*moran_shijian # æ—¥æœŸorq ç¯€æ°£ojq æ˜ŸæœŸoxq æ™‚é–“osj
    - lua_translator@*moran_number # æ•¸å­—è½‰å¤§å¯«
  filters:
    - simplifier@emoji
    - lua_filter@*moran_quick_code_hint
    - uniquifier

speller:
  alphabet: "abcdefghijklmnopqrstuvwxyz;`"
  delimiter: " '"
  max_code_length: 4
  auto_select: true
  # auto_clear: max_length # manual | auto | max_length
  auto_select_pattern: ;\w+ #è‡ªåŠ¨ä¸Šå±è§„åˆ™  å¯¹ [;] å¼•å¯¼çš„ç¼–ç å®è¡Œå€™é€‰å”¯ä¸€è‡ªåŠ¨ä¸Šå±
translator:
  dictionary: zrlong
  db_class: tabledb
  enable_charset_filter: false
  enable_sentence: false
  enable_completion: false
  enable_user_dict: false
  initial_quality: 10000

fixed:
  dictionary: zrlong
  db_class: tabledb
  enable_charset_filter: false
  enable_sentence: false
  enable_completion: false
  enable_user_dict: true
  enable_encoder: true
  encode_commit_history: false # æ˜¯å¦é–‹å•“è‡ªå‹•é€ è©
  initial_quality: 2000
custom_phrase: # è‡ªå®šç¾©çŸ­èª
  dictionary: ""
  user_dict: zrlong_custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: true
  initial_quality: 20000

reverse_format:
  comment_format:
    - xform/(\w\w);(\w\w)/$1[$2]/
  preedit_format:
    - xform/^o(lf|bh|cj)//

reverse_tiger:
  tag: reverse_tiger
  dictionary: tigress
  enable_completion: true
  prefix: "`"
  tips: ã€”è™ã€•
  __include: reverse_format

reverse_stroke:
  tag: reverse_stroke
  dictionary: stroke
  prefix: "obh"
  enable_completion: true
  tips: ã€”hspnzã€•
  __include: reverse_format

reverse_zrlf:
  tag: reverse_zrlf
  dictionary: zrlf
  prefix: "olf"
  enable_completion: true
  tips: ã€”ä¸¤åˆ†ã€•
  __include: reverse_format
zkci: # é€ è©
  tag: zkci
  db_class: tabledb
  user_dict: zrlong
  dictionary: zrlong
  enable_user_dict: true
  enable_charset_filter: false
  enable_completion: false
  enable_sentence: true
  enable_encoder: false
  encode_commit_history: false # æ˜¯å¦é–‹å•“è‡ªå‹•é€ è©
  max_phrase_length: 7
  prefix: "'"
  tips: ã€”é€ è¯ã€•
  initial_quality: 10
# repeat: # é‡è¤‡ä¸Šå±
#   input: "="
#   size: 1
#   initial_quality: 0

moran:
  quick_code_indicator: ""
  enable_quick_code_hint: true
  quick_code_hint_skip_chars: true

emoji:
  opencc_config: moran_emoji.json
  option_name: emoji
  tips: all

reverse_lookup:
  dictionary: moran.chars
  enable_user_dict: false
  tips: ã€”é€šé…ã€•

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - { when: has_menu, accept: ";", send: "2" } # åˆ†å·æ¬¡é€‰
    - { when: has_menu, accept: "Control+e", toggle: emoji }

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "(^(``[a-z`]+))|(^([a-z]{2}(`[a-z`]?|[a-z`]`)))"
    zkci: "^[a-z]*'[a-z']*$"
    reverse_tiger: "(^`$)|(^`[a-zA-Z]+$)"
    reverse_stroke: "^obh[A-Za-z]*$"
    reverse_zrlf: "^olf[A-Za-z]*$"
    punct: "^/([0-9]0?|[A-Za-z]+)$"

menu:
  page_size: 5
  alternative_select_keys: "12345" 
